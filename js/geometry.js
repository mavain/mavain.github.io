var Geometry = {
    meshes: {
        player: {
            points: [
            	{"x": 0.533203125, "y": 0.001953125},
            	{"x": 0.833984375, "y": 0.203125},
            	{"x": 0.7578125, "y": 0.54296875},
            	{"x": 0.443359375, "y": 0.814453125},
            	{"x": 0.181640625, "y": 0.689453125},
            	{"x": 0.302734375, "y": 0.560546875},
            	{"x": 0.173828125, "y": 0.298828125},
            	{"x": 0.287109375, "y": 0.1015625},
            	{"x": 0.501953125, "y": 0.400390625}
            ],
            triangles: [
            	{"a": 0, "b": 1, "c": 8},
            	{"a": 8, "b": 1, "c": 2},
            	{"a": 2, "b": 3, "c": 8},
            	{"a": 5, "b": 3, "c": 4},
            	{"a": 5, "b": 8, "c": 3},
            	{"a": 5, "b": 6, "c": 8},
            	{"a": 8, "b": 7, "c": 6},
            	{"a": 7, "b": 0, "c": 8}
            ]
        },
        tree_little: {
            points: [
            	{"x": 0.474609375, "y": 0.357421875},
            	{"x": 0.587890625, "y": 0.37109375},
            	{"x": 0.482421875, "y": 0.60546875},
            	{"x": 0.515625, "y": 0.8359375},
            	{"x": 0.31640625, "y": 0.30859375},
            	{"x": 0.4296875, "y": 0.669921875},
            	{"x": 0.388671875, "y": 0.837890625}
            ],
            triangles: [
            	{"a": 0, "b": 1, "c": 2},
            	{"a": 2, "b": 4, "c": 5},
            	{"a": 5, "b": 6, "c": 3},
            	{"a": 2, "b": 5, "c": 3}
            ]
        },
        tree_growing: {
            points: [
            	{"x": 0.326171875, "y": 0.8359375},
            	{"x": 0.611328125, "y": 0.869140625},
            	{"x": 0.54296875, "y": 0.50390625},
            	{"x": 0.74609375, "y": 0.47265625},
            	{"x": 0.533203125, "y": 0.412109375},
            	{"x": 0.724609375, "y": 0.1796875},
            	{"x": 0.66015625, "y": 0.091796875},
            	{"x": 0.529296875, "y": 0.26171875},
            	{"x": 0.5703125, "y": 0.044921875},
            	{"x": 0.462890625, "y": 0.09375},
            	{"x": 0.1796875, "y": 0.32421875},
            	{"x": 0.44140625, "y": 0.384765625},
            	{"x": 0.443359375, "y": 0.689453125}
            ],
            triangles: [
            	{"a": 4, "b": 3, "c": 2},
            	{"a": 2, "b": 1, "c": 12},
            	{"a": 12, "b": 0, "c": 1},
            	{"a": 12, "b": 11, "c": 2},
            	{"a": 11, "b": 4, "c": 2},
            	{"a": 11, "b": 7, "c": 4},
            	{"a": 7, "b": 5, "c": 4},
            	{"a": 7, "b": 6, "c": 5},
            	{"a": 8, "b": 7, "c": 9},
            	{"a": 7, "b": 10, "c": 11}
            ]
        },
        rock: {
            points: [
            	{"x": 0.359375, "y": 0.158203125},
            	{"x": 0.638671875, "y": 0.240234375},
            	{"x": 0.82421875, "y": 0.66796875},
            	{"x": 0.470703125, "y": 0.78515625},
            	{"x": 0.09375, "y": 0.689453125},
            	{"x": 0.1953125, "y": 0.51953125},
            	{"x": 0.244140625, "y": 0.220703125},
            	{"x": 0.482421875, "y": 0.490234375}
            ],
            triangles: [
            	{"a": 0, "b": 1, "c": 7},
            	{"a": 0, "b": 6, "c": 7},
            	{"a": 6, "b": 5, "c": 7},
            	{"a": 7, "b": 4, "c": 5},
            	{"a": 4, "b": 3, "c": 7},
            	{"a": 7, "b": 2, "c": 3},
            	{"a": 7, "b": 1, "c": 2}
            ]
        }
    }
};

Geometry.onLeftSide = function(ax, ay, bx, by, px, py) {
    var dbax = bx - ax;
    var dbay = by - ay;
    var dpax = px - ax;
    var dpay = py - ay;
    return cba = dbax * dpay - dbay * dpax >= 0;
};

Geometry.pointMeshIntersection = function(name, x, y) {
    var mesh = Geometry.meshes[name];
    for(var triangleIndex in mesh.triangles) {
        var triangle = mesh.triangles[triangleIndex];
        var a = mesh.points[triangle.a];
        var b = mesh.points[triangle.b];
        var c = mesh.points[triangle.c];
        var al = Geometry.onLeftSide(a.x, a.y, b.x, b.y, x, y);
        var bl = Geometry.onLeftSide(b.x, b.y, c.x, c.y, x, y);
        var cl = Geometry.onLeftSide(c.x, c.y, a.x, a.y, x, y);
        if((al == bl) && (bl == cl)) {
            return true;
        }
    }
    return false;
};
